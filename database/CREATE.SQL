/*CREATE GENERATOR GEN_ID_BANCO;
CREATE GENERATOR GEN_ID_BANDEIRA;
CREATE GENERATOR GEN_ID_CARTAO;
CREATE GENERATOR GEN_ID_CIDADE;
CREATE GENERATOR GEN_ID_COFRE;
CREATE GENERATOR GEN_ID_CONTA_BANCARIA;
CREATE GENERATOR GEN_ID_DESPESA;
CREATE GENERATOR GEN_ID_DESPESA_FORMA_PGTO;
CREATE GENERATOR GEN_ID_FORMA_PGTO;
CREATE GENERATOR GEN_ID_LOG_BACKUP;
CREATE GENERATOR GEN_ID_LOGIN;
CREATE GENERATOR GEN_ID_PAIS;
CREATE GENERATOR GEN_ID_PARTICIPANTE;
CREATE GENERATOR GEN_ID_RECEBIMENTO;
CREATE GENERATOR GEN_ID_SUBTIPO_DESPESA;
CREATE GENERATOR GEN_ID_TIPO_DESPESA;
CREATE GENERATOR GEN_ID_USUARIO;
CREATE GENERATOR GEN_ID_USUARIO_DONO_CADASTRO;

CREATE TABLE PAIS (
	ID INTEGER NOT NULL,
	NOME VARCHAR(60) NOT NULL,
	SISCOMEX VARCHAR(11),
	SPED VARCHAR(11),
	CONSTRAINT PK_PAIS PRIMARY KEY (ID)
);

CREATE TABLE ESTADO (
	UF CHAR(2) NOT NULL,
	NOME VARCHAR(30) NOT NULL,
	IBGE INTEGER NOT NULL,
	ID_PAIS INTEGER NOT NULL,
	CONSTRAINT PK_ESTADO PRIMARY KEY (UF),
	CONSTRAINT FK_ESTADO_PAIS FOREIGN KEY (ID_PAIS) REFERENCES PAIS(ID)
);

CREATE TABLE CIDADE (
	ID INTEGER NOT NULL,
	NOME VARCHAR(50) NOT NULL,
	IBGE INTEGER NOT NULL,
	UF CHAR(2) NOT NULL,
	CONSTRAINT PK_CIDADE PRIMARY KEY (ID),
	CONSTRAINT FK_CIDADE_ESTADO FOREIGN KEY (UF) REFERENCES ESTADO(UF)
);

CREATE TABLE BANCO (
	ID INTEGER NOT NULL,
	NUMERO INTEGER NOT NULL,
	NOME VARCHAR(60) NOT NULL,
	CONSTRAINT PK_BANCO PRIMARY KEY (ID)
);

CREATE TABLE COFRE (
	ID INTEGER NOT NULL,
	DATA_ABERTURA DATE NOT NULL,
	DATA_CONTAGEM DATE,
	LOTACAO VARCHAR(15) NOT NULL,
	SITUACAO VARCHAR(15) NOT NULL,
	QTD_NOTA_RS200 INTEGER NOT NULL,
	QTD_NOTA_RS100 INTEGER NOT NULL,
	QTD_NOTA_RS50 INTEGER NOT NULL,
	QTD_NOTA_RS20 INTEGER NOT NULL,
	QTD_NOTA_RS10 INTEGER NOT NULL,
	QTD_NOTA_RS5 INTEGER NOT NULL,
	QTD_NOTA_RS2 INTEGER NOT NULL,
	QTD_MOEDA_RS1 INTEGER NOT NULL,
	QTD_MOEDA_RS050 INTEGER NOT NULL,
	QTD_MOEDA_RS025 INTEGER NOT NULL,
	QTD_MOEDA_RS010 INTEGER NOT NULL,
	QTD_MOEDA_RS005 INTEGER NOT NULL,
	SOBRA DECIMAL(7,2) NOT NULL,
	VALOR_TOTAL DECIMAL(7,2) NOT NULL,
	INFO_ADC VARCHAR(300),
	CONSTRAINT PK_COFRE PRIMARY KEY (ID)
);

CREATE TABLE CONFIGURACAO (
	ID INTEGER NOT NULL,
	APARENCIA VARCHAR(30) NOT NULL,
	CONSTRAINT PK_CONFIGURACAO PRIMARY KEY (ID)
);

CREATE TABLE FORMA_PGTO (
	ID INTEGER NOT NULL,
	NOME VARCHAR(60) NOT NULL,
	SIGLA CHAR(3),
	CONSTRAINT PK_FORMA_PGTO PRIMARY KEY (ID)
);

CREATE TABLE LOG_BACKUP (
	ID INTEGER NOT NULL,
	DATA DATE NOT NULL,
	HORA TIME NOT NULL,
	LOCAL_ARQUIVO VARCHAR(200) NOT NULL,
	CONSTRAINT PK_LOG_BACKUP PRIMARY KEY (ID)
);

CREATE TABLE LOGIN (
	ID INTEGER NOT NULL,
	NOME_PC VARCHAR(20),
	IP_PC VARCHAR(15),
	DATA DATE,
	HORA TIME,
	ID_USUARIO INTEGER NOT NULL,
	CONSTRAINT PK_LOGIN PRIMARY KEY (ID),
	CONSTRAINT FK_LOGIN_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID)
);

CREATE TABLE PARTICIPANTE (
	ID INTEGER NOT NULL,
	PESSOA CHAR(1) NOT NULL,
	NOME VARCHAR(100) NOT NULL,
	FANTASIA VARCHAR(100),
	CNPJ VARCHAR(14),
	IE INTEGER,
	TELEFONE VARCHAR(20),
	CELULAR VARCHAR(20),
	EMAIL VARCHAR(200),
	CEP VARCHAR(9),
	RUA VARCHAR(300),
	NUMERO INTEGER,
	COMPLEMENTO VARCHAR(50),
	BAIRRO VARCHAR(80),
	OBS VARCHAR(300),
	CADASTRO TIMESTAMP,
	ALTERACAO TIMESTAMP,
	DONO_CADASTRO BOOLEAN NOT NULL,
	ID_CIDADE INTEGER,
	ID_USUARIO_CADASTRO INTEGER,
	ID_DONO_CADASTRO INTEGER,
	CONSTRAINT PK_PARTICIPANTE PRIMARY KEY (ID),
	CONSTRAINT FK_PARTICIPANTE_CIDADE FOREIGN KEY (ID_CIDADE) REFERENCES CIDADE(ID),
	CONSTRAINT FK_PARTICIPANTE_USUARIO_CADASTRO FOREIGN KEY (ID_USUARIO_CADASTRO) REFERENCES USUARIO(ID),
	CONSTRAINT FK_PARTICIPANTE_DONO_CADASTRO FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID)
);

CREATE TABLE RECEBIMENTO (
	ID INTEGER NOT NULL,
	DATA DATE NOT NULL,
	HORA_EXTRA DECIMAL(7,2) NOT NULL,
	INSS DECIMAL(7,2) NOT NULL,
	IR DECIMAL(7,2) NOT NULL,
	VALOR_TOTAL DECIMAL(7,2) NOT NULL,
	VALOR_BASE DECIMAL(7,2) NOT NULL,
	SALARIO13 BOOLEAN NOT NULL,
	FERIAS BOOLEAN NOT NULL,
	VALOR_13SALARIO DECIMAL(7,2) NOT NULL,
	VALOR_FERIAS DECIMAL(7,2) NOT NULL,
	ANTECIPACAO DECIMAL(7,2) NOT NULL,
	ID_FORMA_PGTO INTEGER NOT NULL,
	ID_CONTA_BANCARIA INTEGER,
	CHAVE_PIX VARCHAR(100),
	ID_PAGADOR INTEGER NOT NULL,
	ID_DONO_CADASTRO INTEGER,
	ID_USUARIO_CADASTRO INTEGER,
	CONSTRAINT PK_RECEBIMENTO PRIMARY KEY (ID),
	CONSTRAINT FK_RECEBIMENTO_FORMA_PGTO FOREIGN KEY (ID_FORMA_PGTO) REFERENCES FORMA_PGTO(ID),
	CONSTRAINT FK_RECEBIMENTO_CONTA FOREIGN KEY (ID_CONTA_BANCARIA) REFERENCES CONTA_BANCARIA(ID),
	CONSTRAINT FK_RECEBIMENTO_PIX FOREIGN KEY (CHAVE_PIX) REFERENCES PIX(CHAVE),
	CONSTRAINT FK_RECEBIMENTO_DONO_CADASTRO FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_RECEBIMENTO_PAGADOR FOREIGN KEY (ID_PAGADOR) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_RECEBIMENTO_USUARIO_CADASTRO FOREIGN KEY (ID_USUARIO_CADASTRO) REFERENCES USUARIO(ID)
);

CREATE TABLE TIPO_DESPESA (
	ID INTEGER NOT NULL,
	NOME VARCHAR(100) NOT NULL,
	CONSTRAINT PK_TIPO_DESPESA PRIMARY KEY (ID)
);

CREATE TABLE SUBTIPO_DESPESA (
	ID INTEGER NOT NULL,
	NOME VARCHAR(100) NOT NULL,
	ID_TIPO_DESPESA INTEGER NOT NULL,
	CONSTRAINT PK_SUBTIPO_DESPESA PRIMARY KEY (ID),
	CONSTRAINT FK_SUBTIPO_TIPO FOREIGN KEY (ID_TIPO_DESPESA) REFERENCES TIPO_DESPESA(ID)
);

CREATE TABLE USUARIO (
	ID INTEGER NOT NULL,
	NOME VARCHAR(20) NOT NULL,
	SENHA VARCHAR(100) NOT NULL,
	EMAIL VARCHAR(300) NOT NULL,
	CADASTRO TIMESTAMP,
	ALTERACAO TIMESTAMP,
	CONSTRAINT PK_USUARIO PRIMARY KEY (ID)
);

CREATE TABLE USUARIO_DONO_CADASTRO (
	ID INTEGER NOT NULL,
	ID_USUARIO INTEGER NOT NULL,
	ID_DONO_CADASTRO INTEGER NOT NULL,
	CADASTRO TIMESTAMP,
	CONSTRAINT PK_USUARIO_DONO_CADASTRO PRIMARY KEY (ID),
	CONSTRAINT FK_USUARIO_DONO_CAD_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID),
	CONSTRAINT FK_USUARIO_DONO_CAD_DONO_CAD FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID)
);

CREATE TABLE CONTA_BANCARIA (
	ID INTEGER NOT NULL,
	NUMERO VARCHAR(20) NOT NULL,
	AGENCIA VARCHAR(20) NOT NULL,
	TIPO VARCHAR(20) NOT NULL,
	CADASTRO TIMESTAMP,
	ALTERACAO TIMESTAMP,
	ID_BANCO INTEGER NOT NULL,
	ID_DONO_CADASTRO INTEGER,
	ID_USUARIO_CADASTRO INTEGER,
	CONSTRAINT PK_CONTA_BANCARIA PRIMARY KEY (ID),
	CONSTRAINT FK_CONTA_BANCARIA_BANCO FOREIGN KEY (ID_BANCO) REFERENCES BANCO(ID),
	CONSTRAINT FK_CONTA_BANCARIA_DONO_CADASTRO FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_CONTA_BANCARIA_USUARIO_CADASTRO FOREIGN KEY (ID_USUARIO_CADASTRO) REFERENCES USUARIO(ID)
);

CREATE TABLE PIX (
	CHAVE VARCHAR(100) NOT NULL,
	TIPO VARCHAR(60) NOT NULL,
	CADASTRO TIMESTAMP,
	ALTERACAO TIMESTAMP,
	ID_CONTA_BANCARIA INTEGER NOT NULL,
	ID_DONO_CADASTRO INTEGER,
	ID_USUARIO_CADASTRO INTEGER,
	CONSTRAINT PK_PIX PRIMARY KEY (CHAVE),
	CONSTRAINT FK_PIX_CONTA_BANCARIA FOREIGN KEY (ID_CONTA_BANCARIA) REFERENCES CONTA_BANCARIA(ID),
	CONSTRAINT FK_PIX_DONO_CADASTRO FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_PIX_USUARIO_CADASTRO FOREIGN KEY (ID_USUARIO_CADASTRO) REFERENCES USUARIO(ID)
);

CREATE TABLE BANDEIRA (
	ID INTEGER NOT NULL,
	NOME VARCHAR(60) NOT NULL,
	CONSTRAINT PK_BANDEIRA PRIMARY KEY (ID)
);

CREATE TABLE CARTAO (
	ID INTEGER NOT NULL,
	NUMERO VARCHAR(20) NOT NULL,
	TIPO CHAR(1) NOT NULL,
	APROXIMACAO BOOLEAN NOT NULL,
	VALIDADE DATE NOT NULL,
	CADASTRO TIMESTAMP,
	ALTERACAO TIMESTAMP,
	ID_BANDEIRA INTEGER,
	ID_CONTA_BANCARIA INTEGER NOT NULL,
	ID_DONO_CADASTRO INTEGER,
	ID_USUARIO_CADASTRO INTEGER,
	CONSTRAINT PK_CARTAO PRIMARY KEY (ID),
	CONSTRAINT FK_CARTAO_BANDEIRA FOREIGN KEY (ID_BANDEIRA) REFERENCES BANDEIRA(ID),
	CONSTRAINT FK_CARTAO_CONTA_BANCARIA FOREIGN KEY (ID_CONTA_BANCARIA) REFERENCES CONTA_BANCARIA(ID),
	CONSTRAINT FK_CARTAO_DONO_CADASTRO FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_CARTAO_USUARIO_CADASTRO FOREIGN KEY (ID_USUARIO_CADASTRO) REFERENCES USUARIO(ID)
);

CREATE TABLE DESPESA (
	ID INTEGER NOT NULL,
	DATA DATE NOT NULL,
	HORA TIME NOT NULL,
	DESCRICAO VARCHAR(100) NOT NULL,
	CHAVE_NFE VARCHAR(44),
	VALOR DECIMAL(7,2) NOT NULL,
	DESCONTO DECIMAL(7,2) NOT NULL,
	FRETE DECIMAL(7,2) NOT NULL,
	OUTROS DECIMAL(7,2) NOT NULL,
	TOTAL DECIMAL(7,2) NOT NULL,
	PAGA BOOLEAN NOT NULL,
	PARCELA INTEGER,
	CADASTRO TIMESTAMP,
	ALTERACAO TIMESTAMP,
	OBS VARCHAR(300),
	ID_FORNECEDOR INTEGER NOT NULL,
	ID_SUBTIPO INTEGER NOT NULL,
	ID_DONO_CADASTRO INTEGER NOT NULL,
	ID_USUARIO_CADASTRO INTEGER NOT NULL,
	CONSTRAINT PK_DESPESA PRIMARY KEY (ID),
	CONSTRAINT FK_DESPESA_FORNECEDOR FOREIGN KEY (ID_FORNECEDOR) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_DESPESA_SUBTIPO FOREIGN KEY (ID_SUBTIPO) REFERENCES SUBTIPO_DESPESA(ID),
	CONSTRAINT FK_DESPESA_DONO_CADASTRO FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_DESPESA_USUARIO_CADASTRO FOREIGN KEY (ID_USUARIO_CADASTRO) REFERENCES USUARIO(ID)
);

CREATE TABLE DESPESA_FORMA_PGTO (
	ID INTEGER NOT NULL,
	VALOR DECIMAL(7,2) NOT NULL,
	ID_CONTA_BANCARIA INTEGER,
	CHAVE_PIX VARCHAR(100),
	ID_CARTAO INTEGER,
	ID_DESPESA INTEGER NOT NULL,
	ID_FORMA_PGTO INTEGER NOT NULL,
	CONSTRAINT PK_DESPESA_FORMA_PGTO PRIMARY KEY (ID),
	CONSTRAINT FK_DESPESA_FROMA_PGTO_CONTA FOREIGN KEY (ID_CONTA_BANCARIA) REFERENCES CONTA_BANCARIA(ID),
	CONSTRAINT FK_DESPESA_FROMA_PGTO_PIX FOREIGN KEY (CHAVE_PIX) REFERENCES PIX(CHAVE),
	CONSTRAINT FK_DESPESA_FROMA_PGTO_CARTAO FOREIGN KEY (ID_CARTAO) REFERENCES CARTAO(ID),
	CONSTRAINT FK_DESPESA_FROMA_PGTO_DESPESA FOREIGN KEY (ID_DESPESA) REFERENCES DESPESA(ID),
	CONSTRAINT FK_DESPESA_FORMA_PGTO_FORMA_PGTO FOREIGN KEY (ID_FORMA_PGTO) REFERENCES FORMA_PGTO(ID)
);




/*
//CRIANDO O GENERATOR
CREATE GENERATOR GEN_FILME;

//CRIANDO A TRIGGER
SET TERM ^ ;
CREATE OR ALTER TRIGGER TGR_GEN_FILME for TBFILME
BEFORE INSERT position 0
AS
BEGIN
NEW.ID_FILME = gen_id("GEN_FILME",1);
END
^
SET TERM ; ^
*/



*/

--DB DESPESAS.FDB

CREATE GENERATOR GEN_ID_BANCO;
CREATE GENERATOR GEN_ID_BANDEIRA;
CREATE GENERATOR GEN_ID_CARTAO;
CREATE GENERATOR GEN_ID_CIDADE;
CREATE GENERATOR GEN_ID_COFRE;
CREATE GENERATOR GEN_ID_CONTA_BANCARIA;
CREATE GENERATOR GEN_ID_DESPESA;
CREATE GENERATOR GEN_ID_DESPESA_FORMA_PGTO;
CREATE GENERATOR GEN_ID_FORMA_PGTO;
CREATE GENERATOR GEN_ID_LOG_BACKUP;
CREATE GENERATOR GEN_ID_LOGIN;
CREATE GENERATOR GEN_ID_PAIS;
CREATE GENERATOR GEN_ID_PARTICIPANTE;
CREATE GENERATOR GEN_ID_RECEBIMENTO;
CREATE GENERATOR GEN_ID_SUBTIPO_DESPESA;
CREATE GENERATOR GEN_ID_TIPO_DESPESA;
CREATE GENERATOR GEN_ID_USUARIO;
CREATE GENERATOR GEN_ID_USUARIO_DONO_CADASTRO;

CREATE TABLE PAIS (
	ID INTEGER NOT NULL,
	NOME VARCHAR(60) NOT NULL,
	SISCOMEX VARCHAR(11),
	SPED VARCHAR(11),
	CONSTRAINT PK_PAIS PRIMARY KEY (ID)
);

CREATE TABLE ESTADO (
	UF CHAR(2) NOT NULL,
	NOME VARCHAR(30) NOT NULL,
	IBGE INTEGER NOT NULL,
	ID_PAIS INTEGER NOT NULL,
	CONSTRAINT PK_ESTADO PRIMARY KEY (UF),
	CONSTRAINT FK_ESTADO_PAIS FOREIGN KEY (ID_PAIS) REFERENCES PAIS(ID)
);

CREATE TABLE CIDADE (
	ID INTEGER NOT NULL,
	NOME VARCHAR(30) NOT NULL,
	IBGE INTEGER NOT NULL,
	UF CHAR(2) NOT NULL,
	CONSTRAINT PK_CIDADE PRIMARY KEY (ID),
	CONSTRAINT FK_CIDADE_ESTADO FOREIGN KEY (UF) REFERENCES ESTADO(UF)
);

CREATE TABLE BANCO (
	ID INTEGER NOT NULL,
	NUMERO INTEGER NOT NULL,
	NOME VARCHAR(60) NOT NULL,
	CONSTRAINT PK_BANCO PRIMARY KEY (ID)
);

CREATE TABLE COFRE (
	ID INTEGER NOT NULL,
	DATA_ABERTURA DATE NOT NULL,
	DATA_CONTAGEM DATE,
	LOTACAO VARCHAR(15) NOT NULL,
	SITUACAO VARCHAR(15) NOT NULL,
	QTD_NOTA_RS200 INTEGER NOT NULL,
	QTD_NOTA_RS100 INTEGER NOT NULL,
	QTD_NOTA_RS50 INTEGER NOT NULL,
	QTD_NOTA_RS20 INTEGER NOT NULL,
	QTD_NOTA_RS10 INTEGER NOT NULL,
	QTD_NOTA_RS5 INTEGER NOT NULL,
	QTD_NOTA_RS2 INTEGER NOT NULL,
	QTD_MOEDA_RS1 INTEGER NOT NULL,
	QTD_MOEDA_RS050 INTEGER NOT NULL,
	QTD_MOEDA_RS025 INTEGER NOT NULL,
	QTD_MOEDA_RS010 INTEGER NOT NULL,
	QTD_MOEDA_RS005 INTEGER NOT NULL,
	SOBRA DECIMAL(7,2) NOT NULL,
	VALOR_TOTAL DECIMAL(7,2) NOT NULL,
	INFO_ADC VARCHAR(300),
	CONSTRAINT PK_COFRE PRIMARY KEY (ID)
);

CREATE TABLE CONFIGURACAO (
	ID INTEGER NOT NULL,
	APARENCIA VARCHAR(30) NOT NULL,
	CONSTRAINT PK_CONFIGURACAO PRIMARY KEY (ID)
);

CREATE TABLE FORMA_PGTO (
	ID INTEGER NOT NULL,
	NOME VARCHAR(60) NOT NULL,
	SIGLA CHAR(3),
	CONSTRAINT PK_FORMA_PGTO PRIMARY KEY (ID)
);

CREATE TABLE LOG_BACKUP (
	ID INTEGER NOT NULL,
	DATA DATE NOT NULL,
	HORA TIME NOT NULL,
	LOCAL_ARQUIVO VARCHAR(200) NOT NULL,
	CONSTRAINT PK_LOG_BACKUP PRIMARY KEY (ID)
);

CREATE TABLE USUARIO (
	ID INTEGER NOT NULL,
	NOME VARCHAR(20) NOT NULL,
	SENHA VARCHAR(100) NOT NULL,
	EMAIL VARCHAR(300) NOT NULL,
	CADASTRO TIMESTAMP,
	ALTERACAO TIMESTAMP,
	CONSTRAINT PK_USUARIO PRIMARY KEY (ID)
);

CREATE TABLE PARTICIPANTE (
	ID INTEGER NOT NULL,
	PESSOA CHAR(1) NOT NULL,
	NOME VARCHAR(100) NOT NULL,
	FANTASIA VARCHAR(100),
	CNPJ VARCHAR(14),
	IE INTEGER,
	TELEFONE VARCHAR(20),
	CELULAR VARCHAR(20),
	EMAIL VARCHAR(200),
	CEP VARCHAR(9),
	RUA VARCHAR(300),
	NUMERO INTEGER,
	COMPLEMENTO VARCHAR(50),
	BAIRRO VARCHAR(80),
	OBS VARCHAR(300),
	CADASTRO TIMESTAMP,
	ALTERACAO TIMESTAMP,
	DONO_CADASTRO BOOLEAN NOT NULL,
	ID_CIDADE INTEGER,
	ID_USUARIO_CADASTRO INTEGER,
	ID_DONO_CADASTRO INTEGER,
	CONSTRAINT PK_PARTICIPANTE PRIMARY KEY (ID),
	CONSTRAINT FK_PARTICIPANTE_CIDADE FOREIGN KEY (ID_CIDADE) REFERENCES CIDADE(ID),
	CONSTRAINT FK_PARTICIPANTE_USUARIO_CADASTRO FOREIGN KEY (ID_USUARIO_CADASTRO) REFERENCES USUARIO(ID),
	CONSTRAINT FK_PARTICIPANTE_DONO_CADASTRO FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID)
);


CREATE TABLE USUARIO_DONO_CADASTRO (
	ID INTEGER NOT NULL,
	ID_USUARIO INTEGER NOT NULL,
	ID_DONO_CADASTRO INTEGER NOT NULL,
	CADASTRO TIMESTAMP,
	CONSTRAINT PK_USUARIO_DONO_CADASTRO PRIMARY KEY (ID),
	CONSTRAINT FK_USUARIO_DONO_CAD_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID),
	CONSTRAINT FK_USUARIO_DONO_CAD_DONO_CAD FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID)
);

CREATE TABLE BANDEIRA (
	ID INTEGER NOT NULL,
	NOME VARCHAR(60) NOT NULL,
	CONSTRAINT PK_BANDEIRA PRIMARY KEY (ID)
);

CREATE TABLE CONTA_BANCARIA (
	ID INTEGER NOT NULL,
	NUMERO VARCHAR(20) NOT NULL,
	AGENCIA VARCHAR(20) NOT NULL,
	TIPO VARCHAR(20) NOT NULL,
	CADASTRO TIMESTAMP,
	ALTERACAO TIMESTAMP,
	ID_BANCO INTEGER NOT NULL,
	ID_DONO_CADASTRO INTEGER,
	ID_USUARIO_CADASTRO INTEGER,
	CONSTRAINT PK_CONTA_BANCARIA PRIMARY KEY (ID),
	CONSTRAINT FK_CONTA_BANCARIA_BANCO FOREIGN KEY (ID_BANCO) REFERENCES BANCO(ID),
	CONSTRAINT FK_CONTA_BANCARIA_DONO_CADASTRO FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_CONTA_BANCARIA_USUARIO_CADASTRO FOREIGN KEY (ID_USUARIO_CADASTRO) REFERENCES USUARIO(ID)
);

CREATE TABLE PIX (
	CHAVE VARCHAR(100) NOT NULL,
	TIPO VARCHAR(60) NOT NULL,
	CADASTRO TIMESTAMP,
	ALTERACAO TIMESTAMP,
	ID_CONTA_BANCARIA INTEGER NOT NULL,
	ID_DONO_CADASTRO INTEGER,
	ID_USUARIO_CADASTRO INTEGER,
	CONSTRAINT PK_PIX PRIMARY KEY (CHAVE),
	CONSTRAINT FK_PIX_CONTA_BANCARIA FOREIGN KEY (ID_CONTA_BANCARIA) REFERENCES CONTA_BANCARIA(ID),
	CONSTRAINT FK_PIX_DONO_CADASTRO FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_PIX_USUARIO_CADASTRO FOREIGN KEY (ID_USUARIO_CADASTRO) REFERENCES USUARIO(ID)
);

CREATE TABLE CARTAO (
	ID INTEGER NOT NULL,
	NUMERO VARCHAR(20) NOT NULL,
	TIPO CHAR(1) NOT NULL,
	APROXIMACAO BOOLEAN NOT NULL,
	VALIDADE DATE NOT NULL,
	CADASTRO TIMESTAMP,
	ALTERACAO TIMESTAMP,
	ID_BANDEIRA INTEGER,
	ID_CONTA_BANCARIA INTEGER NOT NULL,
	ID_DONO_CADASTRO INTEGER,
	ID_USUARIO_CADASTRO INTEGER,
	CONSTRAINT PK_CARTAO PRIMARY KEY (ID),
	CONSTRAINT FK_CARTAO_BANDEIRA FOREIGN KEY (ID_BANDEIRA) REFERENCES BANDEIRA(ID),
	CONSTRAINT FK_CARTAO_CONTA_BANCARIA FOREIGN KEY (ID_CONTA_BANCARIA) REFERENCES CONTA_BANCARIA(ID),
	CONSTRAINT FK_CARTAO_DONO_CADASTRO FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_CARTAO_USUARIO_CADASTRO FOREIGN KEY (ID_USUARIO_CADASTRO) REFERENCES USUARIO(ID)
);

CREATE TABLE TIPO_DESPESA (
	ID INTEGER NOT NULL,
	NOME VARCHAR(100) NOT NULL,
	CONSTRAINT PK_TIPO_DESPESA PRIMARY KEY (ID)
);

CREATE TABLE SUBTIPO_DESPESA (
	ID INTEGER NOT NULL,
	NOME VARCHAR(100) NOT NULL,
	ID_TIPO_DESPESA INTEGER NOT NULL,
	CONSTRAINT PK_SUBTIPO_DESPESA PRIMARY KEY (ID),
	CONSTRAINT FK_SUBTIPO_TIPO FOREIGN KEY (ID_TIPO_DESPESA) REFERENCES TIPO_DESPESA(ID)
);

CREATE TABLE DESPESA (
	ID INTEGER NOT NULL,
	DATA DATE NOT NULL,
	HORA TIME NOT NULL,
	DESCRICAO VARCHAR(100) NOT NULL,
	CHAVE_NFE VARCHAR(44),
	VALOR DECIMAL(7,2) NOT NULL,
	DESCONTO DECIMAL(7,2) NOT NULL,
	FRETE DECIMAL(7,2) NOT NULL,
	OUTROS DECIMAL(7,2) NOT NULL,
	TOTAL DECIMAL(7,2) NOT NULL,
	PAGA BOOLEAN NOT NULL,
	PARCELA INTEGER,
	CADASTRO TIMESTAMP,
	ALTERACAO TIMESTAMP,
	OBS VARCHAR(300),
	ID_FORNECEDOR INTEGER NOT NULL,
	ID_SUBTIPO INTEGER NOT NULL,
	ID_DONO_CADASTRO INTEGER NOT NULL,
	ID_USUARIO_CADASTRO INTEGER NOT NULL,
	CONSTRAINT PK_DESPESA PRIMARY KEY (ID),
	CONSTRAINT FK_DESPESA_FORNECEDOR FOREIGN KEY (ID_FORNECEDOR) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_DESPESA_SUBTIPO FOREIGN KEY (ID_SUBTIPO) REFERENCES SUBTIPO_DESPESA(ID),
	CONSTRAINT FK_DESPESA_DONO_CADASTRO FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_DESPESA_USUARIO_CADASTRO FOREIGN KEY (ID_USUARIO_CADASTRO) REFERENCES USUARIO(ID)
);

CREATE TABLE DESPESA_FORMA_PGTO (
	ID INTEGER NOT NULL,
	VALOR DECIMAL(7,2) NOT NULL,
	ID_CONTA_BANCARIA INTEGER,
	CHAVE_PIX VARCHAR(100),
	ID_CARTAO INTEGER,
	ID_DESPESA INTEGER NOT NULL,
	ID_FORMA_PGTO INTEGER NOT NULL,
	CONSTRAINT PK_DESPESA_FORMA_PGTO PRIMARY KEY (ID),
	CONSTRAINT FK_DESPESA_FROMA_PGTO_CONTA FOREIGN KEY (ID_CONTA_BANCARIA) REFERENCES CONTA_BANCARIA(ID),
	CONSTRAINT FK_DESPESA_FROMA_PGTO_PIX FOREIGN KEY (CHAVE_PIX) REFERENCES PIX(CHAVE),
	CONSTRAINT FK_DESPESA_FROMA_PGTO_CARTAO FOREIGN KEY (ID_CARTAO) REFERENCES CARTAO(ID),
	CONSTRAINT FK_DESPESA_FROMA_PGTO_DESPESA FOREIGN KEY (ID_DESPESA) REFERENCES DESPESA(ID),
	CONSTRAINT FK_DESPESA_FORMA_PGTO_FORMA_PGTO FOREIGN KEY (ID_FORMA_PGTO) REFERENCES FORMA_PGTO(ID)
);

CREATE TABLE LOGIN (
	ID INTEGER NOT NULL,
	NOME_PC VARCHAR(20),
	IP_PC VARCHAR(15),
	DATA DATE,
	HORA TIME,
	ID_USUARIO INTEGER NOT NULL,
	CONSTRAINT PK_LOGIN PRIMARY KEY (ID),
	CONSTRAINT FK_LOGIN_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID)
);


CREATE TABLE RECEBIMENTO (
	ID INTEGER NOT NULL,
	DATA DATE NOT NULL,
	HORA_EXTRA DECIMAL(7,2) NOT NULL,
	INSS DECIMAL(7,2) NOT NULL,
	IR DECIMAL(7,2) NOT NULL,
	VALOR_TOTAL DECIMAL(7,2) NOT NULL,
	VALOR_BASE DECIMAL(7,2) NOT NULL,
	SALARIO13 BOOLEAN NOT NULL,
	FERIAS BOOLEAN NOT NULL,
	VALOR_13SALARIO DECIMAL(7,2) NOT NULL,
	VALOR_FERIAS DECIMAL(7,2) NOT NULL,
	ANTECIPACAO DECIMAL(7,2) NOT NULL,
	ID_FORMA_PGTO INTEGER NOT NULL,
	ID_CONTA_BANCARIA INTEGER,
	CHAVE_PIX VARCHAR(100),
	ID_PAGADOR INTEGER NOT NULL,
	ID_DONO_CADASTRO INTEGER,
	ID_USUARIO_CADASTRO INTEGER,
	CONSTRAINT PK_RECEBIMENTO PRIMARY KEY (ID),
	CONSTRAINT FK_RECEBIMENTO_FORMA_PGTO FOREIGN KEY (ID_FORMA_PGTO) REFERENCES FORMA_PGTO(ID),
	CONSTRAINT FK_RECEBIMENTO_CONTA FOREIGN KEY (ID_CONTA_BANCARIA) REFERENCES CONTA_BANCARIA(ID),
	CONSTRAINT FK_RECEBIMENTO_PIX FOREIGN KEY (CHAVE_PIX) REFERENCES PIX(CHAVE),
	CONSTRAINT FK_RECEBIMENTO_DONO_CADASTRO FOREIGN KEY (ID_DONO_CADASTRO) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_RECEBIMENTO_PAGADOR FOREIGN KEY (ID_PAGADOR) REFERENCES PARTICIPANTE(ID),
	CONSTRAINT FK_RECEBIMENTO_USUARIO_CADASTRO FOREIGN KEY (ID_USUARIO_CADASTRO) REFERENCES USUARIO(ID)
);


--DB ARQUIVO.FDB

CREATE GENERATOR GEN_ID_ARQUIVO;

CREATE TABLE ARQUIVO (
	ID INTEGER NOT NULL, 
	NOME VARCHAR(250) NOT NULL, 
	EXTENSAO VARCHAR(50) NOT NULL, 
	BASE64 BLOB NOT NULL, 
	DATA_HORA_UPLOAD TIMESTAMP NOT NULL, 
	ID_DESPESA INTEGER NOT NULL,
	CONSTRAINT PK_ARQUIVO PRIMARY KEY (ID),
);

